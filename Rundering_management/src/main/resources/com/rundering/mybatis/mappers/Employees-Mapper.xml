<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Employees-Mapper">
<resultMap type="employees" id="employeesMap">
	
		<result column="EMPLOYEE_ID" property="employeeId" />
		<result column="BRANCH_CODE" property="branchCode" />
		<result column="JOINING_COMPANY_DATE" property="joiningCompanyDate" />
		<result column="DEPARTMENT" property="department" />
		<result column="POSITION" property="position" />
		<result column="REGIST_DATE" property="registDate" />
		<result column="MODIFY_DATE" property="modifyDate" />
		<result column="DELETE_YN" property="deleteYn" />
		<result column="MEMBERNO" property="memberno" />
	
	</resultMap>
	
	<select id="selectEmployeeById" resultMap="employeesMap" parameterType="str">
		select *
		  from tb_employees
		 where memberno=#{memberno} 
	</select>
	
	<select id="selectEmployeeByMno" resultMap="employeesMap" parameterType="str">
		select 
			A.EMPLOYEE_ID as EMPLOYEE_ID
			,A.BRANCH_CODE as BRANCH_CODE
			,A.JOINING_COMPANY_DATE as JOINING_COMPANY_DATE
			,A.DEPARTMENT as DEPARTMENT
			,A.POSITION as POSITION
			,A.REGIST_DATE as REGIST_DATE
			,A.MODIFY_DATE as MODIFY_DATE
			,A.DELETE_YN as DELETE_YN
			,A.MEMBERNO as MEMBERNO
		  from TB_EMPLOYEES A, TB_MEMBER B
		 where A.MEMBERNO = B.MEMBERNO
		   and A.MEMBERNO=#{memberno}
	</select>
	<update id="employeeRegist" parameterType="employees" >
		INSERT INTO
		TB_EMPLOYEES(
		EMPLOYEE_ID
		,BRANCH_CODE
		,DEPARTMENT
		,POSITION
		,MEMBERNO
		) VALUES(
		#{department} ||'22'||LPAD(EMPLOYEE_ID_SEQ.NEXTVAL, 3, 0)
		,#{branchCode}
		,#{department}
		,#{position}
		,#{memberno}
		)
	</update>
	
	<select id="getEmployeeByNo" resultMap="employeesMap" parameterType="str" >
		SELECT *
		FROM TB_EMPLOYEES
		WHERE MEMBERNO = #{memberno}
	</select>
	
		<select id="selectDeliveryDepartmentEmployeesByBranchCode" resultMap="employeesMap" parameterType="str">
		select *
		  from tb_employees
		 where BRANCH_CODE = #{branchCode} 
		  and DEPARTMENT = 'DE'
	</select>


</mapper>